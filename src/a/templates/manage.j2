{% extends "base.j2" %}

{% block title %}@{{ user.username | escape }}{% endblock %}

{% block head %}<link rel="stylesheet" href="{{ url_for("static", filename="css/sign.css")}}" />{% endblock %}

{% block description %}manage user @{{ user.username | escape }}{% endblock %}

{% block body %}
<h1>manage {{ user.role.name }} {{ user.username | escape }}</h1>
<form method="POST">
    <fieldset>
        <legend>info</legend>

        <div class="form-group">
            <label for="password_old">old password</label>
            <input inputmode="numeric" type="password" maxlength="{{ pw_len }}" minlength="1" id="password_old" name="password_old" placeholder="old password ( required on password change )" />
        </div>

        <div class="form-group">
            <label for="pin">PIN</label>
            <input type="password" maxlength="{{ pin_len }}" minlength="1" id="pin" name="pin" placeholder="pin ( required on password change )" />
        </div>

        <div class="form-group">
            <label for="password">new password</label>
            <input oninput="document.getElementById('password_old').required=document.getElementById('pin').required=(!!this.value)" type="password" maxlength="{{ pw_len }}" minlength="1" id="password" name="password" placeholder="new password ( password change )" />
        </div>

        <div class="form-group">
            <label for="bio">bio</label>
            <textarea maxlength="{{ bio_len }}" name="bio" id="bio" placeholder="hi, i'm ...">{{ user.bio }}</textarea>
        </div>

        <div id=captcha class="captcha">
            {% if c is not none %}
            {{ c.image() }} {{ c.audio() }}
            {% endif %}
        </div>

        <div class="form-group">
            <label for="code">CAPTCHA</label>
            <input required type="text" id="code" name="code" placeholder="enter the CAPTCHA above" />
        </div>

        <button type="submit">commit</button>
    </fieldset>
</form>
{% include "captcha.j2" %}
{% endblock %}

